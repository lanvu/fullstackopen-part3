(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),o=t(13),r=t.n(o),u=(t(20),t(14)),l=t(2),i=t(3),s=t.n(i),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=function(e){return s.a.post(m,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=(t(38),function(e){var n=e.label,t=e.value,a=e.onChange;return c.a.createElement("div",null,n," ",c.a.createElement("input",{value:t,onChange:a}))}),g=function(e){var n=e.onSubmit,t=e.valueName,a=e.onNameChange,o=e.valueNumber,r=e.onNumberChange;return c.a.createElement("form",{onSubmit:n},c.a.createElement(v,{label:"name:",value:t,onChange:a}),c.a.createElement(v,{label:"number:",value:o,onChange:r}),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.id,t=e.name,a=e.number,o=e.handleClick;return c.a.createElement("p",null,t," ",a,c.a.createElement("button",{onClick:function(){return o(n,t)}},"delete"))},p=function(e){var n=e.persons,t=e.handleClick;return c.a.createElement(c.a.Fragment,null,n.map((function(e){return c.a.createElement(E,Object.assign({key:e.id},e,{handleClick:t}))})))},w=function(e){var n=e.status,t=e.message;return null===n?null:"error"===n?c.a.createElement("div",{className:"error"},t):c.a.createElement("div",{className:"success"},t)},C=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),s=i[0],m=i[1],E=Object(a.useState)(""),C=Object(l.a)(E,2),k=C[0],j=C[1],O=Object(a.useState)(""),N=Object(l.a)(O,2),S=N[0],y=N[1],D=Object(a.useState)({status:null,message:""}),B=Object(l.a)(D,2),I=B[0],J=B[1],L=function(){setTimeout((function(){J({status:null,message:""})}),5e3)},W=function(){f().then((function(e){o(e)}))},x=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(a.useEffect)((function(){W()}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(w,I),c.a.createElement(v,{label:"filter shown with:",value:S,onChange:function(e){y(e.target.value)}}),c.a.createElement("h3",null,"add a new"),c.a.createElement(g,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name===s}));if(n){var a=Object(u.a)({},n,{number:k});window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&h(n.id,a).then((function(){W(),J({status:"success",message:"Updated ".concat(n.name)}),L()})).catch((function(e){J({status:"error",message:"Infomation of ".concat(n.name," has already been removed from server")}),L(),W()}))}else d({name:s,number:k}).then((function(e){o(t.concat(e)),J({status:"success",message:"Added ".concat(e.name)}),L()}));m(""),j("")},valueName:s,onNameChange:function(e){m(e.target.value)},valueNumber:k,onNumberChange:function(e){j(e.target.value)}}),c.a.createElement("h3",null,"Numbers"),c.a.createElement(p,{persons:x,handleClick:function(e,n){window.confirm("Delete ".concat(n," ?"))&&b(e).then((function(){W(),J({status:"success",message:"Deleted ".concat(n)}),L()}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.8e1ef097.chunk.js.map